import{s as _,T,m as x,c,w as u,o as r,a as h,u as l,Z as B,b as e,d as C,i as f,f as K,y as W,j as b,z as N,t as S,F as j,l as v,N as I,O as M}from"./app-ece2a1fe.js";/* empty css                               *//* empty css                *//* empty css                              */import{S as w}from"./sweetalert2.all-2d76b64b.js";import{_ as V}from"./AuthenticatedLayout-b17846c8.js";import A from"./Index-47e38829.js";/* empty css            */import"./app-82ed81c5.js";import"./ApplicationLogo-d59423bd.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                            */const L={class:"page-heading mb-2"},E={class:"page-title"},F={class:"row"},O=e("div",{class:"col-12 col-md-6 order-md-1 order-last"},[e("h3",null,"Data PKWT"),e("p",{class:"text-subtitle text-muted"}," Daftar lengkap PKWT yang terdaftar dalam sistem. ")],-1),Y={class:"col-12 col-md-6 order-md-2 order-first"},q={"aria-label":"breadcrumb",class:"breadcrumb-header float-start float-lg-end"},z={class:"breadcrumb"},G={class:"breadcrumb-item"},U=e("li",{class:"breadcrumb-item active","aria-current":"page"}," Data PKWT ",-1),Z={class:"page-content"},H={class:"row"},J={class:"col-12"},Q={class:"row g-3 mb-3"},R={class:"col-md-4"},X=e("option",{value:""},"Semua Perusahaan...",-1),ee=["value"],ae={class:"card mb-4"},te={class:"card-header"},se={class:"d-flex justify-content-between"},le=e("h5",{class:"card-title"}," Data PKWT ",-1),oe=e("i",{class:"fa-fw select-all fas"},"ï•",-1),ne=e("div",{class:"card-body"},[e("div",{class:"table-responsive datatable-minimal"},[e("table",{class:"table",id:"table-data"},[e("thead",null,[e("tr",null,[e("th",null,"Perusahaan"),e("th",null,"No PKWT"),e("th",null,"Lama PKWT (Bulan)"),e("th",null,"Mulai PKWT"),e("th",null,"Akhir PKWT"),e("th",null,"Tanggal Pencatatan"),e("th",null,"Action")])]),e("tbody")])])],-1),we={__name:"Index",props:{perusahaan:{type:Object}},setup(k){const p=_(null),o=_();let n;const i=T({id_perusahaan:""}),g=()=>{$(document).on("click",".edit-link",function(a){a.preventDefault();const t=$(this).data("user-id");M.get(route("dashboard.pkwt.edit",{id:t}),{},{preserveState:!0})}),$(document).on("click",".delete-link",function(a){a.preventDefault();const t=$(this).data("user-id");w.fire({title:"Yakin ingin menghapus?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",cancelButtonColor:"#d33",reverseButtons:!0}).then(s=>{s.isConfirmed&&axios.delete(route("dashboard.pkwt.destroy",{id:t})).then(d=>{w.fire("Berhasil dihapus!","","success"),n.ajax.reload(null,!1)}).catch(d=>{console.error("Failed to delete user:",d)})})})},m=()=>{n&&(n.ajax.reload(null,!1),o.value=null)},y=()=>{p.value.redrawDataTableChild()},D=async()=>{try{n=$("#table-data").DataTable({select:!0,responsive:!0,lengthMenu:[[5,10,50,-1],[5,10,50,"All"]],ajax:{url:route("dashboard.pkwt.loadPkwt"),data:function(a){a.id_perusahaan=$("#id_perusahaan").val()}},columns:[{data:"perusahaan.nama"},{data:"no_pkwt"},{data:"lama_pkwt"},{data:"mulai_pkwt"},{data:"akhir_pkwt"},{data:"tgl_pencatatan_pkwt"},{data:null,render:function(a,t,s){return`
                            <div class="dropdown">
                                <button class="btn btn-sm btn-icon btn-default me-1" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa-solid fa-ellipsis-vertical"></i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item edit-link" href="#" data-user-id="${s.id}">Edit</a>
                                    <a class="dropdown-item delete-link" href="#" data-user-id="${s.id}">Delete</a>
                                </div>
                            </div>
                        `}}]}),n.on("select",function(a,t,s,d){let P=n.rows(d).data();o.value=P[0].id}).on("deselect",function(a,t,s,d){o.value=null}),g()}catch(a){console.error("Gagal memuat data:",a)}};return x(()=>{D();let a=document.querySelectorAll(".choices");for(let t=0;t<a.length;t++)a[t].classList.contains("multiple-remove")?new Choices(a[t],{delimiter:",",editItems:!0,maxItemCount:-1,removeItemButton:!0}):new Choices(a[t])}),(a,t)=>(r(),c(V,null,{default:u(()=>[h(l(B),{title:"Data PKWT"}),e("div",L,[e("div",E,[e("div",F,[O,e("div",Y,[e("nav",q,[e("ol",z,[e("li",G,[h(l(f),{href:a.route("dashboard.index")},{default:u(()=>[C("Dashboard")]),_:1},8,["href"])]),U])])])])])]),e("div",Z,[e("section",H,[e("div",J,[e("form",Q,[e("div",R,[K(e("select",{class:"choices",name:"id_perusahaan",id:"id_perusahaan","onUpdate:modelValue":t[0]||(t[0]=s=>l(i).id_perusahaan=s),onChange:m},[X,(r(!0),b(j,null,N(k.perusahaan,s=>(r(),b("option",{value:s.id,key:s.id},S(s.nama),9,ee))),128))],544),[[W,l(i).id_perusahaan]])])]),e("div",ae,[e("div",te,[e("div",se,[le,l(i).id_perusahaan?(r(),c(l(f),{key:0,href:a.route("dashboard.pkwt.create"),"preserve-state":!0,"preserve-scroll":"true",class:"btn icon btn-primary"},{default:u(()=>[oe]),_:1},8,["href"])):v("",!0)])]),ne]),o.value?(r(),c(A,{key:0,idPkwt:o.value,ref_key:"pkwtDetail",ref:p},null,8,["idPkwt"])):v("",!0)])])]),h(l(I),{redrawDataTable:m,redrawDataTableChild:y,idPerusahaan:l(i).id_perusahaan,idPkwt:o.value},null,8,["idPerusahaan","idPkwt"])]),_:1}))}};export{we as default};
