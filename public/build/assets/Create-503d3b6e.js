import{s as C,T as F,m as S,j as c,b as a,f as i,A as y,n as u,u as e,v as _,t as p,d as f,l as h,e as M,q as T,H as V,o as b}from"./app-ece2a1fe.js";/* empty css                               *//* empty css                      *//* empty css                              */const D=["onSubmit"],N={class:"modal fade text-left",id:"inlineForm",tabindex:"-1","aria-labelledby":"myModalLabel33","aria-hidden":"true",style:{display:"none"}},j={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg",role:"document"},A={class:"modal-content"},E=T('<div class="modal-header"><h4 class="modal-title" id="myModalLabel33">Create</h4><button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>',1),U={class:"modal-body"},L={class:"row"},I=a("div",{class:"col-12"},[a("div",{class:"table-responsive datatable-minimal"},[a("table",{class:"table table-hover",id:"table-data",style:{width:"100%"}},[a("thead",null,[a("tr",null,[a("th",null,"Nomor SK Pendaftaran PKB"),a("th",null,"Tanggal Pendaftaran PKB"),a("th",null,"Mulai Berlaku PKB"),a("th",null,"Akhir Berlaku PKB")])]),a("tbody")])])],-1),q=[I],z={class:"row"},G={class:"col-md-6 col-12"},H=a("h6",null,"Nomor SK Pendaftaran PKB",-1),Y={class:"form-group"},J={class:"invalid-feedback"},O={class:"col-md-6 col-12"},Q=a("h6",null,"Tanggal Pendaftaran PKB",-1),R={class:"form-group"},W={class:"invalid-feedback"},X={class:"col-md-6 col-12"},Z=a("h6",null,"Mulai Berlaku PKB",-1),aa={class:"form-group"},ta={class:"invalid-feedback"},ea={class:"col-md-6 col-12"},oa=a("h6",null,"Akhir Berlaku PKB",-1),la={class:"form-group"},sa={class:"invalid-feedback"},na={class:"modal-footer",style:{"background-color":"#f6f8fb"}},ia=a("button",{type:"button",class:"btn bg-white btn-outline-default border me-auto","data-bs-dismiss":"modal","aria-label":"Close"},[a("i",{class:"bx bx-x d-block d-sm-none"}),a("span",{class:"d-none d-sm-block"},"Close")],-1),ra=a("i",{class:"fa-fw select-all fas"},"",-1),da=a("i",{class:"fa-fw select-all fas"},"",-1),ca=["disabled"],ua=a("i",{class:"fa-fw select-all fas"},"",-1),va={__name:"Create",props:{idPerusahaan:Number,parentFunction:{type:Function}},setup(w){const r=w,{show:_a,close:pa,redirect:x}=V(),s=C(!1);let d,m,v;const t=F({id_perusahaan:r.idPerusahaan??"",nomor_sk_pendaftaran_pkb:null,tanggal_pendaftaran_pkb:null,mulai_berlaku_pkb:null,akhir_berlaku_pkb:null}),B=()=>{t.post(route("dashboard.pkb.store"),{preserveScroll:!0,onFinish:()=>{},onSuccess:()=>{d.ajax.reload(null,!1),k()}})},P=async()=>{try{let n=route("dashboard.pkb.loadData");r.idPerusahaan&&(n=n+`?id_perusahaan=${r.idPerusahaan}`),d=$("#table-data").DataTable({select:!0,responsive:!0,pagingType:"simple",lengthMenu:[[5,10,50,-1],[5,10,50,"All"]],ajax:{url:n},columns:[{data:"nomor_sk_pendaftaran_pkb"},{data:"tanggal_pendaftaran_pkb"},{data:"mulai_berlaku_pkb"},{data:"akhir_berlaku_pkb"}]}),d.on("select",function(o,l,ba,K){let g=d.rows(K).data();r.parentFunction(g[0],"setPkbs"),console.log(g[0]),m.hide()})}catch(n){console.error("Gagal memuat data:",n)}},k=()=>{s.value=!s.value};return S(()=>{m=new bootstrap.Modal(document.getElementById("inlineForm")),m.show(),v=document.getElementById("inlineForm"),v.addEventListener("hidden.bs.modal",x),flatpickr(".flatpickr-no-config",{dateFormat:"Y-m-d"}),P()}),(n,o)=>(b(),c("form",{onSubmit:M(B,["prevent"]),autocomplete:"off",novalidate:""},[a("div",N,[a("div",j,[a("div",A,[E,a("div",U,[i(a("div",L,q,512),[[y,!s.value]]),i(a("div",z,[a("div",G,[H,a("div",Y,[i(a("input",{type:"text",class:u(["form-control",{"is-invalid":e(t).errors.nomor_sk_pendaftaran_pkb}]),"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).nomor_sk_pendaftaran_pkb=l)},null,2),[[_,e(t).nomor_sk_pendaftaran_pkb]]),a("div",J,p(e(t).errors.nomor_sk_pendaftaran_pkb),1)])]),a("div",O,[Q,a("div",R,[i(a("input",{type:"text",class:u(["form-control flatpickr-no-config flatpickr-input",{"is-invalid":e(t).errors.tanggal_pendaftaran_pkb}]),"onUpdate:modelValue":o[1]||(o[1]=l=>e(t).tanggal_pendaftaran_pkb=l),autocomplete:"off"},null,2),[[_,e(t).tanggal_pendaftaran_pkb]]),a("div",W,p(e(t).errors.tanggal_pendaftaran_pkb),1)])]),a("div",X,[Z,a("div",aa,[i(a("input",{type:"text",class:u(["form-control flatpickr-no-config flatpickr-input",{"is-invalid":e(t).errors.mulai_berlaku_pkb}]),"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).mulai_berlaku_pkb=l),autocomplete:"off"},null,2),[[_,e(t).mulai_berlaku_pkb]]),a("div",ta,p(e(t).errors.mulai_berlaku_pkb),1)])]),a("div",ea,[oa,a("div",la,[i(a("input",{type:"text",class:u(["form-control flatpickr-no-config flatpickr-input",{"is-invalid":e(t).errors.akhir_berlaku_pkb}]),"onUpdate:modelValue":o[3]||(o[3]=l=>e(t).akhir_berlaku_pkb=l),autocomplete:"off"},null,2),[[_,e(t).akhir_berlaku_pkb]]),a("div",sa,p(e(t).errors.akhir_berlaku_pkb),1)])])],512),[[y,s.value]])]),a("div",na,[ia,s.value?h("",!0):(b(),c("button",{key:0,type:"button",class:"btn btn-primary ms-1",onClick:o[4]||(o[4]=l=>k())},[ra,f(" Tambah Data ")])),s.value?(b(),c("button",{key:1,type:"button",class:"btn btn-light ms-1",onClick:o[5]||(o[5]=l=>k())},[da,f(" Kembali ")])):h("",!0),s.value?(b(),c("button",{key:2,type:"submit",class:"btn btn-primary ms-1",disabled:e(t).processing},[ua,f(" Simpan ")],8,ca)):h("",!0)])])])])],40,D))}};export{va as default};
