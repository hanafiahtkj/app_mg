/* empty css                               */import{S as i}from"./sweetalert2.all-2d76b64b.js";import{_ as m}from"./AuthenticatedLayout-b17846c8.js";import{s as p,m as _,c as b,w as l,o as v,a as o,u as d,Z as g,b as e,d as k,i as c,N as w,O as x}from"./app-ece2a1fe.js";/* empty css            */import"./app-82ed81c5.js";import"./ApplicationLogo-d59423bd.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                            */const B={class:"page-heading mb-2"},y={class:"page-title"},D={class:"row"},C=e("div",{class:"col-12 col-md-6 order-md-1 order-last"},[e("h3",null,"Data Perusahaan"),e("p",{class:"text-subtitle text-muted"}," Daftar lengkap perusahaan yang terdaftar dalam sistem. ")],-1),T={class:"col-12 col-md-6 order-md-2 order-first"},N={"aria-label":"breadcrumb",class:"breadcrumb-header float-start float-lg-end"},P={class:"breadcrumb"},j={class:"breadcrumb-item"},S=e("li",{class:"breadcrumb-item active","aria-current":"page"}," Data Perusahaan ",-1),I={class:"page-content"},M={class:"row"},V={class:"col-12"},Y={class:"card"},A={class:"card-header"},E={class:"d-flex justify-content-between"},U=e("h5",{class:"card-title"}," Data Perusahaan ",-1),F=e("i",{class:"fa-fw select-all fas"},"",-1),O=e("div",{class:"card-body"},[e("div",{class:"table-responsive datatable-minimal"},[e("table",{class:"table",id:"table-users"},[e("thead",null,[e("tr",null,[e("th",null,"Nama"),e("th",null,"Email"),e("th",null,"Alamat"),e("th",null,"Jenis Usaha / Sektor"),e("th",null,"Pimpinan"),e("th",null,"Status"),e("th",null,"Action")])]),e("tbody")])])],-1),W={__name:"Index",props:{},setup(G){p();let r;const u=()=>{$(document).on("click",".edit-link",function(a){a.preventDefault();const s=$(this).data("user-id");x.get(route("dashboard.perusahaan.edit",{id:s}),{},{preserveState:!0})}),$(document).on("click",".delete-link",function(a){a.preventDefault();const s=$(this).data("user-id");i.fire({title:"Yakin ingin menghapus?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",cancelButtonColor:"#d33",reverseButtons:!0}).then(t=>{t.isConfirmed&&axios.delete(route("dashboard.perusahaan.destroy",{id:s})).then(n=>{i.fire("Berhasil dihapus!","","success"),r.ajax.reload(null,!1)}).catch(n=>{console.error("Failed to delete user:",n)})})}),$(document).on("click",".verify-link",function(a){a.preventDefault();const s=$(this).data("user-id");i.fire({title:"Yakin ingin memverifikasi?",icon:"info",showCancelButton:!0,confirmButtonText:"Yes, verifikasi!",cancelButtonText:"No, cancel!",cancelButtonColor:"#d33",reverseButtons:!0}).then(t=>{t.isConfirmed&&axios.post(route("dashboard.perusahaan.verify",{id_perusahaan:s})).then(n=>{i.fire("Berhasil diverifikasi!","","success"),r.ajax.reload(null,!1)}).catch(n=>{console.error("Failed to verifikasi user:",n)})})})},h=()=>{r&&r.ajax.reload(null,!1)},f=async()=>{try{r=$("#table-users").DataTable({responsive:!0,lengthMenu:[[5,10,50,-1],[5,10,50,"All"]],ajax:{url:route("dashboard.perusahaan.loadPerusahaan")},columns:[{data:"nama"},{data:"email"},{data:"alamat"},{data:"sektor"},{data:"pemilik"},{data:"user.email_verified_at",render:function(a,s,t){return a?'<span class="badge bg-success">Confirmed</span>':'<span class="badge bg-warning">Unconfirmed</span>'}},{data:null,render:function(a,s,t){return`
                            <div class="dropdown">
                                <button class="btn btn-sm btn-icon btn-default me-1" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" ariaexpanded="false">
                                    <i class="fa-solid fa-ellipsis-vertical"></i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    ${t.user.email_verified_at===null?`<a class="dropdown-item verify-link" href="#" data-user-id="${t.id}">Verifikasi</a>`:""}
                                    <a class="dropdown-item edit-link" href="#" data-user-id="${t.id}">Edit</a>
                                    <a class="dropdown-item delete-link" href="#" data-user-id="${t.id}">Delete</a>
                                </div>
                            </div>
                        `}}]}),u()}catch(a){console.error("Gagal memuat data:",a)}};return _(()=>{f()}),(a,s)=>(v(),b(m,null,{default:l(()=>[o(d(g),{title:"Perusahaan"}),e("div",B,[e("div",y,[e("div",D,[C,e("div",T,[e("nav",N,[e("ol",P,[e("li",j,[o(d(c),{href:a.route("dashboard.index")},{default:l(()=>[k("Dashboard")]),_:1},8,["href"])]),S])])])])])]),e("div",I,[e("section",M,[e("div",V,[e("div",Y,[e("div",A,[e("div",E,[U,o(d(c),{href:a.route("dashboard.perusahaan.create"),"preserve-state":!0,class:"btn icon btn-primary"},{default:l(()=>[F]),_:1},8,["href"])])]),O])])])]),o(d(w),{redrawDataTable:h})]),_:1}))}};export{W as default};
