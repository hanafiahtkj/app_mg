(function(n,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("@inertiajs/vue3"),require("axios")):typeof define=="function"&&define.amd?define(["exports","vue","@inertiajs/vue3","axios"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n["Momentum Modal"]={},n.vue,n.vue3,n.axios))})(this,function(n,t,p,d){"use strict";const m=t.ref(),h={setResolveCallback:e=>{m.value=e},resolve:e=>m.value(e)},k={install(e,o){h.setResolveCallback(o.resolve)}},a=t.computed(()=>{var e,o;return(o=(e=p.usePage())==null?void 0:e.props)==null?void 0:o.modal}),M=t.computed(()=>{var e;return(e=a.value)==null?void 0:e.props}),i=t.computed(()=>{var e;return(e=a.value)==null?void 0:e.key}),s=t.ref(),u=t.shallowRef(),v=t.ref(!1),f=t.ref(),c=t.ref(),C=e=>{Object.entries(e).forEach(([o,l])=>["post","put","patch","delete"].forEach(r=>{d.defaults.headers[r][o]=l}))},L=()=>{["X-Inertia-Modal-Key","X-Inertia-Modal-Redirect"].forEach(([o,l])=>["get","post","put","patch","delete"].forEach(r=>{delete d.defaults.headers[r][o]}))},b=()=>{var e,o;C({"X-Inertia-Modal-Key":i.value,"X-Inertia-Modal-Redirect":(e=a.value)==null?void 0:e.redirectURL}),d.defaults.headers.get["X-Inertia-Modal-Redirect"]=((o=a.value)==null?void 0:o.redirectURL)??""},y=()=>{v.value=!1,L()},R=()=>{var e,o,l,r;if(c.value==((e=a.value)==null?void 0:e.nonce)||!((o=a.value)!=null&&o.component))return y();s.value!=((l=a.value)==null?void 0:l.component)&&(s.value=a.value.component,s.value?u.value=t.defineAsyncComponent(()=>h.resolve(s.value)):u.value=!1),c.value=(r=a.value)==null?void 0:r.nonce,f.value=u.value?t.h(u.value,{key:i.value,...M.value}):"",t.nextTick(()=>v.value=!0)};R(),typeof window<"u"&&window.addEventListener("popstate",e=>{c.value=null}),t.watch(a,()=>{var e;((e=a.value)==null?void 0:e.nonce)!==c.value&&R()},{deep:!0}),t.watch(i,b);const j=()=>{var o,l;var e=((o=a.value)==null?void 0:o.redirectURL)??((l=a.value)==null?void 0:l.baseURL);if(f.value=!1,!!e)return p.router.visit(e,{preserveScroll:!0,preserveState:!0})},w=()=>({show:v,vnode:f,close:y,redirect:j,props:M}),E=t.defineComponent({setup(){const{vnode:e}=w();return()=>e.value}});n.Modal=E,n.modal=k,n.useModal=w,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
