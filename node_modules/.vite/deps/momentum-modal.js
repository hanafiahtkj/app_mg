import {
  K,
  Oe
} from "./chunk-A5ZIHNQG.js";
import {
  computed,
  defineAsyncComponent,
  defineComponent,
  h,
  nextTick,
  ref,
  shallowRef,
  watch
} from "./chunk-J6475X5X.js";
import {
  axios_default
} from "./chunk-AVF2OPUP.js";
import "./chunk-UXIASGQL.js";

// node_modules/momentum-modal/dist/momentum-modal.js
var f = ref();
var h2 = {
  setResolveCallback: (e) => {
    f.value = e;
  },
  resolve: (e) => f.value(e)
};
var A = {
  install(e, a) {
    h2.setResolveCallback(a.resolve);
  }
};
var t = computed(() => {
  var e, a;
  return (a = (e = K()) == null ? void 0 : e.props) == null ? void 0 : a.modal;
});
var R = computed(() => {
  var e;
  return (e = t.value) == null ? void 0 : e.props;
});
var d = computed(() => {
  var e;
  return (e = t.value) == null ? void 0 : e.key;
});
var n = ref();
var s = shallowRef();
var p = ref(false);
var i = ref();
var u = ref();
var U = (e) => {
  Object.entries(e).forEach(
    ([a, o]) => ["post", "put", "patch", "delete"].forEach((l) => {
      axios_default.defaults.headers[l][a] = o;
    })
  );
};
var X = () => {
  ["X-Inertia-Modal-Key", "X-Inertia-Modal-Redirect"].forEach(
    ([a, o]) => ["get", "post", "put", "patch", "delete"].forEach((l) => {
      delete axios_default.defaults.headers[l][a];
    })
  );
};
var g = () => {
  var e, a;
  U({
    "X-Inertia-Modal-Key": d.value,
    "X-Inertia-Modal-Redirect": (e = t.value) == null ? void 0 : e.redirectURL
  }), axios_default.defaults.headers.get["X-Inertia-Modal-Redirect"] = ((a = t.value) == null ? void 0 : a.redirectURL) ?? "";
};
var k = () => {
  p.value = false, X();
};
var w = () => {
  var e, a, o, l;
  if (u.value == ((e = t.value) == null ? void 0 : e.nonce) || !((a = t.value) != null && a.component))
    return k();
  n.value != ((o = t.value) == null ? void 0 : o.component) && (n.value = t.value.component, n.value ? s.value = defineAsyncComponent(() => h2.resolve(n.value)) : s.value = false), u.value = (l = t.value) == null ? void 0 : l.nonce, i.value = s.value ? h(s.value, {
    key: d.value,
    ...R.value
  }) : "", nextTick(() => p.value = true);
};
w();
typeof window < "u" && window.addEventListener("popstate", (e) => {
  u.value = null;
});
watch(
  t,
  () => {
    var e;
    ((e = t.value) == null ? void 0 : e.nonce) !== u.value && w();
  },
  { deep: true }
);
watch(d, g);
var x = () => {
  var a, o;
  var e = ((a = t.value) == null ? void 0 : a.redirectURL) ?? ((o = t.value) == null ? void 0 : o.baseURL);
  if (i.value = false, !!e)
    return Oe.visit(e, {
      preserveScroll: true,
      preserveState: true
    });
};
var H = () => ({
  show: p,
  vnode: i,
  close: k,
  redirect: x,
  props: R
});
var N = defineComponent({
  setup() {
    const { vnode: e } = H();
    return () => e.value;
  }
});
export {
  N as Modal,
  A as modal,
  H as useModal
};
//# sourceMappingURL=momentum-modal.js.map
